---
title: "3 LDA parameter tuning"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Topic modeling with latent Dirichlet allocation (LDA). Finding optimal k-parameter.
Using coherence score as a value of goodness.

```{r setup, message=FALSE, warning=FALSE}
library(rfintext)
library(quanteda)
library(topicmodels)
library(topicdoc)
library(dplyr)
library(ggplot2)
library(doFuture)
plan(multisession)
```

```{r}
dtm <- aspol |>
  preprocess_corpus() |>
  corpus_to_dtm(kunta, LEMMA)
```

```{r}
topfeatures(dtm)
```

```{r}
k_values <- c(seq(2, 20, by = 1), seq(20, 200, by = 10))
results <- foreach(k = k_values, .combine = 'rbind', .inorder = FALSE) %dofuture% {
  rfintext::get_coherence(dtm, k)
}
```


```{r}
plot_coherence(results)
```

```{r}
plot_coherence(results[1:25,])
```

```{r}
plot_coherence(results[1:20,])
```

```{r}
plot_coherence(results[1:10,])
```


Highest is 2, peaks in 6, 9, 16


